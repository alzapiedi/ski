{"version":3,"sources":["webpack/bootstrap 09f53ab8d1ee166758f7","./js/game.js","./js/ski.js","./js/movingObject.js","./js/utils.js","./js/skier.js","./js/obstacle.js","./js/ramp.js","./js/skiView.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACXD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,oDAAoD;AAC9E,OAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB,wBAAuB;AACvB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAwB,sBAAsB;AAC9C;AACA;AACA,IAAG;AACH,wBAAuB,sBAAsB;AAC7C;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA,qDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;AAGA;;;;;;;ACtPA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;;;;;;AC3BA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;;;;;;ACzBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4BAA2B,4CAA4C;AACvE;AACA;;;AAGA;AACA;AACA,WAAU;AACV;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;;;;AC5CA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY;AACZ,IAAG;AACH,aAAY;AACZ,IAAG;AACH,aAAY;AACZ,IAAG;AACH,aAAY;AACZ;AACA;;;;AAIA;;;;;;;ACxBA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAU;AACV;;AAEA;;;;;;;ACdA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 09f53ab8d1ee166758f7\n **/","var Ski = require('./ski'),\n    SkiView = require('./skiView');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var canvas = document.getElementById('ski');\n  var ctx = canvas.getContext(\"2d\");\n  canvas.height = 600;\n  canvas.width = 800;\n  var game = new Ski();\n  var view = new SkiView(game, ctx);\n  view.start();\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/game.js\n ** module id = 0\n ** module chunks = 0\n **/","var MovingObject = require('./movingObject'),\n    Utils = require('./utils'),\n    Skier = require('./skier'),\n    Obstacle = require('./obstacle'),\n    Ramp = require('./ramp');\n\nvar Ski = function () {\n  this.loadImages();\n  this.obstacles = [];\n  this.ramps = [];\n  this.crashed = false;\n  this.canCrash = true;\n  this.direction = 3;\n  this.speed = 1;\n  this.density = 1;\n  this.isJumping = false;\n  // skiImg.onload = function () {\n  this.skier = new Skier({pos: [400, 300], game: this, img: this.skierImgs[3]});\n  // }.bind(this);\n  this.startObjectInterval();\n}\n\nSki.prototype.setSpeed = function (s) {\n  this.stopObjectInterval();\n  this.speed = s;\n  this.updateVelocities();\n  this.startObjectInterval();\n}\n\nSki.prototype.setDensity = function (d) {\n  this.stopObjectInterval();\n  this.density = d;\n  this.startObjectInterval()\n}\n\nSki.prototype.vels = function () {\n  var s = this.speed;\n  var vels = {\n    3: [0,0],\n    4: [-8 * s, -6 * s],\n    5: [-4 * s, -8 * s],\n    6: [0, -13 * s],\n    7: [4 * s, -8 * s],\n    8: [8 * s, -6 * s],\n    9: [0,0],\n    10: [0,0]\n  };\n    return vels;\n}\n\nSki.prototype.remove = function (object) {\n    if(object instanceof Obstacle){\n      var i = this.obstacles.indexOf(object);\n      this.obstacles.splice(i, 1);\n    } else if (false) {\n\n    }\n  };\n\nSki.prototype.loadImages = function () {\n  var ski3 = new Image();\n  var ski4 = new Image();\n  var ski5 = new Image();\n  var ski6 = new Image();\n  var ski7 = new Image();\n  var ski8 = new Image();\n  var ski9 = new Image();\n  var ski10 = new Image();\n  var skiCrash = new Image();\n  var skiJump = new Image();\n  var tree1 = new Image();\n  var tree2 = new Image();\n  var tree3 = new Image();\n  var rock = new Image();\n  var ramp = new Image();\n  ski3.src = 'img/skier3.png';\n  ski4.src = 'img/skier4.png';\n  ski5.src = 'img/skier5.png';\n  ski6.src = 'img/skier6.png';\n  ski7.src = 'img/skier7.png';\n  ski8.src = 'img/skier8.png';\n  ski9.src = 'img/skier9.png';\n  ski10.src = 'img/skier10.png';\n  skiCrash.src = 'img/skicrash.png';\n  skiJump.src = 'img/skijump.png';\n  tree1.src = 'img/tree1.png';\n  tree2.src = 'img/tree2.png';\n  tree3.src = 'img/tree3.png';\n  rock.src = 'img/rock.png';\n  ramp.src = 'img/ramp.png';\n  this.skierImgs = {3: ski3, 4: ski4, 5: ski5, 6: ski6, 7: ski7, 8: ski8, 9: ski9, 10: ski10, crash: skiCrash, jump: skiJump};\n  this.obstacleImgs = {0: tree1, 1: tree2, 2: tree3, 3: rock};\n  this.rampImg = ramp;\n}\n\nSki.prototype.allObjects = function () {\n  var obj = this.obstacles.concat(this.ramps);\n  return obj;\n}\n\nSki.prototype.startObjectInterval = function () {\n  this.objInterval = setInterval(function () {\n    if ( this.direction > 3 && this.direction < 9 ) {\n      this.addObject();\n    }\n  }.bind(this), (300/this.speed)/this.density);\n}\n\nSki.prototype.stopObjectInterval = function () {\n  clearInterval(this.objInterval);\n  this.objInterval = 0;\n}\n\nSki.prototype.randomPosition = function () {\n  var x = Math.floor(Math.random() * 800);\n  return [x, 600];\n}\n\nSki.prototype.draw = function (ctx) {\n  ctx.clearRect(0,0,800,600);\n  if (!this.isJumping) { this.skier.draw(ctx); }\n  this.allObjects().forEach(function (obj) {\n    obj.draw(ctx);\n  });\n  if (this.isJumping) { this.skier.draw(ctx); }\n}\n\nSki.prototype.moveObjects = function () {\n  this.allObjects().forEach(function (obj) {\n    obj.move();\n  });\n}\n\nSki.prototype.shiftObjects = function (n) {\n  this.allObjects().forEach(function (obj) {\n    obj.shift(n);\n  });\n}\n\nSki.prototype.step = function () {\n  this.moveObjects();\n  this.checkCollisions();\n}\n\nSki.prototype.checkCollisions = function () {\n  var obj = this.allObjects();\n  for (var i = 0; i < obj.length; i++) {\n    if (this.skier.isCollidedWith(obj[i])) {\n      this.skier.collideWith(obj[i]);\n    }\n  }\n}\n\nSki.prototype.addObject = function () {\n  var i = Math.floor(Math.random() * 10);\n  if (i > 2) {\n    var j = Math.floor(Math.random() * 4);\n    var obstacle = new Obstacle({\n      pos: this.randomPosition(),\n      vel: this.vels()[this.direction],\n      game: this,\n      img: this.obstacleImgs[j],\n      style: j\n    });\n    this.obstacles.push(obstacle);\n  } else {\n    var ramp = new Ramp({\n      pos: this.randomPosition(),\n      vel: this.vels()[this.direction],\n      game: this,\n      img: this.rampImg\n    });\n    this.ramps.push(ramp);\n  }\n}\n\nSki.prototype.updateVelocities = function () {\n  this.allObjects().forEach(function (obj) {\n    obj.vel = this.vels()[this.direction];\n  }.bind(this));\n}\n\nSki.prototype.changeDirection = function (keyCode) {  //37 left   39 right\n  if (!this.crashed && !this.isJumping) {\n    var dir = this.direction;\n    if (dir === 10) {\n      setTimeout(function () {\n        this.canCrash = true;\n      }.bind(this), 1000)\n    }\n    if (keyCode === 37 && dir === 3) {\n      this.direction = 9;\n    } else if (keyCode === 37 && dir > 3 && dir < 9) {\n      this.direction += 1;\n    } else if (keyCode === 39 && dir === 9) {\n      this.direction = 3;\n    } else if (keyCode === 39 && dir > 3 && dir < 9) {\n      this.direction -= 1;\n    } else if (keyCode === 40) {\n      this.direction = 6;\n    } else if (keyCode === 37 && dir === 9) {\n      this.shiftObjects(10);\n    } else if (keyCode === 39 && dir === 3) {\n      this.shiftObjects(-10);\n    } else {\n      return;\n    }\n    this.skier.img = this.skierImgs[this.direction];\n    this.updateVelocities();\n  }\n}\n\nSki.prototype.skiCrash = function () {\n  this.stopObjectInterval();\n  this.skier.img = this.skierImgs[\"crash\"];\n  this.crashed = true;\n  this.canCrash = false;\n  this.allObjects().forEach(function (obj) {\n    obj.vel = [0, 0];\n  });\n  setTimeout(function () {\n    this.crashed = false;\n    this.direction = 10;\n    this.skier.img = this.skierImgs[this.direction];\n    this.updateVelocities();\n    this.startObjectInterval();\n  }.bind(this), 1000);\n}\n\nSki.prototype.skiJump = function () {\n  this.isJumping = true;\n  this.direction = 6;\n  this.updateVelocities();\n  this.canCrash = false;\n  this.skier.img = this.skierImgs[\"jump\"];\n  setTimeout(function () {\n    this.isJumping = false;\n    this.canCrash = true;\n    this.direction = 6;\n    this.skier.img = this.skierImgs[this.direction];\n    this.skier.animationDir = -1;\n    this.skier.pos = [400, 300];\n  }.bind(this), 2000);\n}\n\n\nmodule.exports = Ski;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/ski.js\n ** module id = 1\n ** module chunks = 0\n **/","var Utils = require('./utils');\n\nvar MovingObject = function (attr) {\n  this.pos = attr.pos;\n  this.vel = attr.vel;\n  this.game = attr.game;\n  this.img = attr.img;\n}\n\nMovingObject.prototype.move = function () {\n  if (!this.vel) { debugger; }\n  this.pos[0] += this.vel[0];\n  this.pos[1] += this.vel[1];\n  if (this.pos[1] < -40) {\n    this.game.remove(this);\n  }\n}\n\nMovingObject.prototype.shift = function (n) {\n  this.pos[0] += n;\n}\n\nMovingObject.prototype.draw = function (ctx) {\n  ctx.drawImage(this.img, this.pos[0], this.pos[1]);\n}\n\n\nmodule.exports = MovingObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/movingObject.js\n ** module id = 2\n ** module chunks = 0\n **/","var Utils = {};\n\nUtils.inherits = function (subclass, parentClass) {\n  var Surrogate = function () {};\n  Surrogate.prototype = parentClass.prototype;\n  subclass.prototype = new Surrogate();\n  subclass.prototype.constructor = subclass;\n}\n\nUtils.arrayEquals = function (arr1, arr2) {\n  if (!arr1 || !arr2) {\n    return false;\n  }\n  return arr1[0] === arr2[0] && arr1[1] === arr2[1];\n}\n\nUtils.overlap = function (r1, r2) {\n  return !(r2.left > r1.right ||\n           r2.right < r1.left ||\n           r2.top > r1.bottom ||\n           r2.bottom < r1.top);\n}\n\n\n\nmodule.exports = Utils;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/utils.js\n ** module id = 3\n ** module chunks = 0\n **/","var MovingObject = require('./movingObject'),\n    Utils = require('./utils'),\n    Obstacle = require('./obstacle'),\n    Ramp = require('./ramp');\n\nvar Skier = function (attr) {\n  var pos = attr.pos;\n  var game = attr.game;\n  var img = attr.img;\n  this.animationDir = -1;\n  MovingObject.call(this, {pos: pos, vel: [0, 0], game: game, img: img});\n}\nUtils.inherits(Skier, MovingObject);\n\n\nSkier.prototype.getHitBox = function () {\n  var pos = this.pos;\n  return {top: pos[1] + 10, bottom: pos[1] + 30, left: pos[0], right: pos[0] + 15};\n}\n\nSkier.prototype.isCollidedWith = function (otherObject) {\n  return Utils.overlap(this.getHitBox(), otherObject.getHitBox());\n};\n\n\nSkier.prototype.collideWith = function (otherObject) {\n  if (otherObject instanceof Obstacle && this.game.canCrash  && !this.game.isJumping) {\n    this.game.skiCrash();\n  } else if (otherObject instanceof Ramp && !this.game.isJumping) {\n    this.game.skiJump();\n  }\n}\n\nSkier.prototype.draw = function (ctx) {\n  if (this.game.isJumping) {\n    this.pos[1] += 5*this.animationDir;\n    if (this.pos[1] < 200) {\n      this.animationDir = 1;\n    }\n  }\n    ctx.drawImage(this.img, this.pos[0], this.pos[1]);\n}\n\n\nmodule.exports = Skier;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/skier.js\n ** module id = 4\n ** module chunks = 0\n **/","var MovingObject = require('./movingObject'),\n    Utils = require('./utils');\n\nvar Obstacle = function (attr) {\n  this.style = attr.style;\n  MovingObject.call(this, attr);\n}\nUtils.inherits(Obstacle, MovingObject);\n\nObstacle.prototype.getHitBox = function () {\n  var pos = this.pos;\n  if (this.style === 0) {\n    return {top: pos[1] + 20, bottom: pos[1] + 60, left: pos[0] + 10, right: pos[0] + 25};\n  } else if (this.style === 1) {\n    return {top: pos[1] + 12, bottom: pos[1] + 30, left: pos[0], right: pos[0] + 15};\n  } else if (this.style === 2) {\n    return {top: pos[1] + 10, bottom: pos[1] + 30, left: pos[0], right: pos[0] + 15};\n  } else {\n    return {top: pos[1] + 5, bottom: pos[1] + 12, left: pos[0], right: pos[0] + 15};\n  }\n}\n\n\n\nmodule.exports = Obstacle;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/obstacle.js\n ** module id = 5\n ** module chunks = 0\n **/","var MovingObject = require('./movingObject'),\n    Utils = require('./utils');\n\nvar Ramp = function (attr) {\n  MovingObject.call(this,attr);\n}\n\nUtils.inherits(Ramp, MovingObject);\n\nRamp.prototype.getHitBox = function () {\n  var pos = this.pos;\n  return {top: pos[1], bottom: pos[1] + 5, left: pos[0], right: pos[0] + 25};\n}\n\nmodule.exports = Ramp;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/ramp.js\n ** module id = 6\n ** module chunks = 0\n **/","var Ski = require('./ski');\n\nvar SkiView = function (game, ctx) {\n  this.game = game;\n  this.ctx = ctx;\n}\n\nSkiView.prototype.start = function () {\n  this.bindKeyHandlers();\n  this.bindSettingsHandler();\n  var callback = function () {\n    this.game.draw(this.ctx);\n    this.game.step();\n  }\n  this.gameInterval = setInterval(callback.bind(this), 50);\n}\n\nSkiView.prototype.bindKeyHandlers = function () {\n  var key;\n  $(document).on('keydown', function (e) {\n    key = e.keyCode;\n    if (key > 36 && key < 41) {\n      e.preventDefault();\n      this.unbindSettingsHandler();\n      this.game.changeDirection(e.keyCode);\n    }\n  }.bind(this));\n}\n\nSkiView.prototype.unbindKeyHandlers = function () {\n  $(document).off('keydown');\n}\n\nSkiView.prototype.bindSettingsHandler = function () {\n  $('.speed').on('click', function (e) {\n    var s = parseInt(e.target.id.substring(5,6));\n    $('.speed').children().each(function (i, el) {\n      $(el).removeClass();\n    });\n    $(e.target).addClass('selected');\n    this.game.setSpeed(s);\n  }.bind(this));\n  $('.density').on('click', function (e) {\n    var d = parseInt(e.target.id.substring(3,4));\n    $('.density').children().each(function (i, el) {\n      $(el).removeClass();\n    });\n    $(e.target).addClass('selected');\n    this.game.setDensity(d);\n  }.bind(this));\n}\n\nSkiView.prototype.unbindSettingsHandler = function () {\n  $('.speed').off('click');\n  $('.density').off('click');\n  $('.options').css('display', 'none');\n  $('.newgame').css('display', 'block');\n  $('.newgame').on('click', function (e) {\n    e.preventDefault();\n    this.unbindKeyHandlers();\n    clearInterval(this.gameInterval);\n    delete this.game;\n    this.game = new Ski();\n    $('.newgame').css('display', 'none');\n    $('.options').css('display', 'block');\n    this.start();\n  }.bind(this));\n\n}\nmodule.exports = SkiView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/skiView.js\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}